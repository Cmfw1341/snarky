<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Snapshot (meja.Meja_lib.Type1.Snapshot)</title><link rel="stylesheet" href="../../../../../../snarky/css/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../../snarky/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../../index.html">meja</a> &#x00BB; <a href="../../index.html">Meja_lib</a> &#x00BB; <a href="../index.html">Type1</a> &#x00BB; Snapshot</nav><h1>Module <code>Type1.Snapshot</code></h1><p>Implements a weak, mutable linked-list containing the history of changes.</p><p>Every change is added to the same list, and the snapshots correspond to cuts of this list. We gain several advantages from using a weak, mutable linked-list: * if there are no active snapshots, the whole list will be GC'd and any changes don't need to be stored at all * if there are active snapshots, OCaml will GC the history of changes up to the first active snapshot * all simultaneously active snapshots point to a part of the same physical list * the snapshots can be erased during backtracking, so that different snapshots can't be used out of order to 'restore' a state that didn't exist previously</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt></dl><dl><dt class="spec value" id="val-create"><a href="#val-create" class="anchor"></a><code><span class="keyword">val</span> create : unit <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Get a new snapshot.</p></dd></dl><dl><dt class="spec value" id="val-add_to_history"><a href="#val-add_to_history" class="anchor"></a><code><span class="keyword">val</span> add_to_history : <a href="../index.html#type-change">change</a> <span>&#45;&gt;</span> unit</code></dt><dd><p>Add a change to the history of all active snapshots.</p></dd></dl><dl><dt class="spec value" id="val-backtrack"><a href="#val-backtrack" class="anchor"></a><code><span class="keyword">val</span> backtrack : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-change">change</a> list</code></dt><dd><p>Erase the history back to the snapshot, and return the list of changes that occurred since, ordered from newest to oldest.</p></dd></dl><dl><dt class="spec value" id="val-filtered_backtrack"><a href="#val-filtered_backtrack" class="anchor"></a><code><span class="keyword">val</span> filtered_backtrack : f:(<a href="../index.html#type-change">change</a> <span>&#45;&gt;</span> bool) <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-change">change</a> list</code></dt><dd><p>Erase all changes matching the filter <code>f</code> back to the snapshot, and return the erased changes, ordered from newest to oldest.</p></dd></dl><dl><dt class="spec value" id="val-debug_print"><a href="#val-debug_print" class="anchor"></a><code><span class="keyword">val</span> debug_print : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-debug_print_latest"><a href="#val-debug_print_latest" class="anchor"></a><code><span class="keyword">val</span> debug_print_latest : Stdlib.Format.formatter <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> unit</code></dt></dl></div></body></html>